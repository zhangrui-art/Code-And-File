<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style type="text/css">
	*{
		margin: 0;
		padding: 0;
		list-style-type: none;
	}
    #my_menu{
        margin-left: 20px;;
        margin-top: 20px;
      /* background-color: aqua; */
      display: flex;
    }
    .menuSpan{
        height: auto;
        width: 150px;
        height: 20px;
        padding: 10px 20px;
        color: #fff;
        display: block;
        text-align: center;
        background-color: rgb(135, 187, 223) ;
        border: 1px solid rgb(199, 221, 237);
    }
    a{
        display: block;
        height: auto;
        height: 20px;
        width: 150px;
        padding: 10px 20px;
        color: #fff;
        display: block;
        text-align: center;
        background-color: rgb(135, 187, 223) ;
        border: 1px solid rgb(199, 221, 237);        
    }
    .collapsed{
        height: 40px;
        overflow: hidden;
    }
    </style>
    <script src="tool.js"></script>
    <script type="text/javascript">
        window.onload = function() {
            let menuSpan = document.querySelectorAll(".menuSpan")
            let openDiv = menuSpan[0].parentNode
            for (let i = 0; i < menuSpan.length; i++) {
                menuSpan[i].onclick = function(){
                    // this 代表当前的span
                    let parentDiv =  this.parentNode

                    // let begin = parentDiv.offsetHeight

                    // 关闭parentDiv
                    toggleClass(parentDiv,"collapsed")

                    // let end = parentDiv.offsetHeight

                    // parentDiv.style.height = begin + "px"

                    // move(parentDiv,end,"height",10)
                    // 判断openDiv 和parentDiv是否相同
                    if(openDiv != parentDiv && !hasClass(openDiv,"collapsed")){
                        // 为了统一处理动画过渡效果，希望在这里把addClass改为toggleClass
                        // 此处toggleClass()不需要有移除
                        toggleClass(openDiv,"collapsed")
                        // addClass(openDiv,"collapsed")
                    }
                    
                    openDiv = parentDiv
                    
                }                
            }
        }
    </script>
</head>

<body>
    <div id="my_menu" class="sdmenu">
        <div>
            <span class="menuSpan">在线工具</span>
            <a href="#">图像优化</a>
            <a href="#">收藏夹图标生成</a>
            <a href="#">邮件</a>
            <a href="#">htaccess密码</a>
            <a href="#">梯度图像</a>
            <a href="#">按钮生成器</a>
        </div>
        <div class="collapsed">
            <span class="menuSpan">支持我们</span>
            <a href="#">推荐我们</a>
            <a href="#">链接我们</a>
            <a href="#">网络资源</a>            
        </div>
        <div class="collapsed">
            <span class="menuSpan">合作伙伴</span>
            <a href="#">工具包</a>
            <a href="#">css驱动</a>
            <a href="#">css例子</a>
        </div>
        <div class="collapsed">
            <span class="menuSpan">测试电流</span>
            <a href="#">Current  or not</a>
            <a href="#">Current  or not</a>
            <a href="#">Current  or not</a>
            <a href="#">Current  or not</a>            
        </div>                        
    </div>
</body>

</html>